---
description: 
globs: **/Aqt.CoreFW.Domain.Shared/**/*.cs
alwaysApply: false
---
# Rule: Chuáº©n hÃ³a táº§ng Aqt.CoreFW.Domain.Shared (ABP Framework + DDD)

## Context

Táº§ng `Aqt.CoreFW.Domain.Shared` lÃ  nÆ¡i Ä‘á»‹nh nghÄ©a cÃ¡c thÃ nh pháº§n dÃ¹ng chung giá»¯a nhiá»u táº§ng trong há»‡ thá»‘ng nhÆ° `Application`, `HttpApi`, `Web`, `EntityFrameworkCore`.  
Táº§ng nÃ y **khÃ´ng chá»©a nghiá»‡p vá»¥**, **khÃ´ng chá»©a logic xá»­ lÃ½**, vÃ  **khÃ´ng chá»©a Entity hay Repository**.  
NÃ³ lÃ  nÆ¡i khai bÃ¡o cÃ¡c cáº¥u trÃºc **tÄ©nh**, **báº¥t biáº¿n**, vÃ  **há»£p Ä‘á»“ng (contract)** cÃ³ thá»ƒ dÃ¹ng chung.

## Requirements

### ğŸ“ Cáº¥u trÃºc thÆ° má»¥c

- âœ… ThÆ° má»¥c `Enums/`, `Settings/`, `MultiTenancy/`, `Localization/`, `Constants/`
- âŒ KhÃ´ng cÃ³ `Entities/`, `Repositories/`, `Services/`, `Events/`

#### âœ”ï¸ NÃªn:
- Sá»­ dá»¥ng file:  
  - `CoreFWSettings.cs`
  - `CoreFWDomainErrorCodes.cs`
  - `CoreFWResource.cs`
- PhÃ¢n tÃ¡ch rÃµ `Localization`, `MultiTenancy`, `GlobalFeatures`

#### âŒ KhÃ´ng nÃªn:
- Gá»™p má»i file vÃ o thÆ° má»¥c gá»‘c
- Táº¡o class xá»­ lÃ½ logic

### ğŸ“¦ Namespace chuáº©n

- âœ… DÃ¹ng namespace dáº¡ng: `Aqt.CoreFW.Domain.Shared.[Module].[Subfolder]`
- âŒ KhÃ´ng dÃ¹ng namespace láº«n `Domain`, `Application`, `Web`

ğŸ“Œ VÃ­ dá»¥ chuáº©n:
```csharp
namespace Aqt.CoreFW.Domain.Shared.Orders.Enums
```
### ğŸ“‘ Enum

- âœ… DÃ¹ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a tráº¡ng thÃ¡i, loáº¡i (vÃ­ dá»¥: `OrderStatus`, `TransactionType`)
- âœ… ÄÆ°á»£c sá»­ dá»¥ng táº¡i DTO, AppService, HttpApi, Razor Pages
- âŒ KhÃ´ng thÃªm method hoáº·c switch logic trong enum

#### âœ”ï¸ NÃªn dÃ¹ng khi:
- Enum cÃ³ giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh, Ã­t thay Ä‘á»•i
- Cáº§n chia sáº» cho nhiá»u táº§ng

#### âŒ KhÃ´ng nÃªn dÃ¹ng khi:
- Dá»¯ liá»‡u thay Ä‘á»•i theo runtime
- Enum cÃ³ hÃ nh vi logic phá»©c táº¡p

### âš™ï¸ Settings

- âœ… Khai bÃ¡o táº¡i `CoreFWSettings.cs`
- âœ… DÃ¹ng `const string` vá»›i prefix theo chuáº©n module

ğŸ“Œ VÃ­ dá»¥:
```csharp
public static class CoreFWSettings
{
    public const string MaxItemPerPage = "CoreFW.MaxItemPerPage";
}
```

### ğŸŒ Localization

- âœ… DÃ¹ng file JSON táº¡i `Localization/CoreFW`
- âœ… Class anchor Ä‘áº·t táº¡i `CoreFWResource.cs`
- âœ… LuÃ´n luÃ´n cáº­p nháº­t cho Tiáº¿ng Viá»‡t(vi.json) vÃ  Tiáº¿ng Anh(en.json)
- âŒ KhÃ´ng xá»­ lÃ½ logic trong file resource

---

### ğŸ“› Error Codes

- âœ… Äáº·t táº¡i `CoreFWDomainErrorCodes.cs`
- âœ… Format `"CoreFW:{Code}"`

ğŸ“Œ VÃ­ dá»¥:
```csharp
public static class CoreFWDomainErrorCodes
{
    public const string InvalidRange = "CoreFW:00001";
}
```

### âŒ KHÃ”NG ÄÆ¯á»¢C chá»©a:

| ThÃ nh pháº§n                     | VÃ¬ sao khÃ´ng?                                  |
|--------------------------------|------------------------------------------------|
| `Entity`, `AggregateRoot`      | Thuá»™c vá» táº§ng `Domain`, khÃ´ng pháº£i Shared      |
| `Repository`                   | LÃ  há»£p Ä‘á»“ng truy cáº­p dá»¯ liá»‡u, khÃ´ng dÃ¹ng chung |
| `PermissionDefinitionProvider` | Äáº·t táº¡i `Application.Contracts` theo chuáº©n ABP |
| Class chá»©a logic               | Vi pháº¡m nguyÃªn táº¯c báº¥t biáº¿n, dá»… gÃ¢y rá»‘i        |

### ğŸ§¾ Using Ä‘Ãºng namespace

Cáº§n `using` Ä‘Ãºng cÃ¡c namespace sau Ä‘á»ƒ truy cáº­p Setting, Localization

| Loáº¡i dá»¯ liá»‡u          | Namespace máº«u            |
|-----------------------|--------------------------|
| Setting name constant | `Aqt.CoreFW.Settings`    |
| Localization Resource | `Aqt.CoreFW.Localization`|

ğŸ“Œ VÃ­ dá»¥:
```csharp
using Aqt.CoreFW.Settings;
using Aqt.CoreFW.Localization;
```

## Examples

<example>
```csharp
// âœ… Enum Ä‘Æ°á»£c dÃ¹ng trong nhiá»u táº§ng
namespace Aqt.CoreFW.Domain.Shared.Orders.Enums;

public enum OracleStatus
{
    Draft,
    Approved,
    Cancelled
}

// âœ… Setting name chuáº©n
namespace Aqt.CoreFW.Domain.Shared.Settings;

public static class CoreFWSettings
{
    public const string MaxRetryCount = "CoreFW.MaxRetry";
}

// âœ… Error code Ä‘á»‹nh danh
namespace Aqt.CoreFW.Domain.Shared;

public static class CoreFWDomainErrorCodes
{
    public const string DuplicateEntry = "CoreFW:00001";
}

// âœ… Anchor class cho localization
namespace Aqt.CoreFW.Domain.Shared.Localization;

public class CoreFWResource
{
}
```
</example>

<example type="invalid">
```csharp
// âŒ KhÃ´ng nÃªn cÃ³ logic xá»­ lÃ½
public static class StatusHelper
{
    public static string GetLabel(OracleStatus status) => status.ToString(); // âŒ Vi pháº¡m
}

// âŒ KhÃ´ng nÃªn Ä‘áº·t Entity á»Ÿ Ä‘Ã¢y
public class OracleEntry
{
    public Guid Id { get; set; } // âŒ Äáº·t á»Ÿ Domain
}

// âŒ KhÃ´ng nÃªn Ä‘á»‹nh nghÄ©a repository
public interface IOracleRepository
{
    Task<OracleEntry> GetAsync(Guid id); // âŒ Repository Ä‘á»ƒ á»Ÿ Domain
}
```
</example>
